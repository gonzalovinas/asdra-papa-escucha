<div class="contenido-tab">

  <div class="col-izquierda">

  <form action="" method="post" id="actualizar_configuracion"
class="pure-form  pure-form-stacked" >

   <fieldset>
     <legend>   <img src="assets/settings.png" width="32px" height="32px">
       Configuración
     </legend>

     <label for="smtp_ip">Dirección Servidor de Correo Saliente</label>
     <input type="text"  name="smtp_ip" id="smtp_ip"/>
     <label for="smtp_port">Puerto Servidor de Correo Saliente</label>
     <input type="text"  name="smtp_ip" id="smtp_port"/>
     <label for="smtp_ip">Usuario de Autenticación Servidor Correo Saliente</label>
     <input type="text"  name="smtp_auth_usr" id="smtp_auth_usr"/>
     <label for="smtp_pass">Contraseña de Autenticación Servidor Correo Saliente</label>
     <input type="text"  name="smtp_auth_pass" id="smtp_auth_pass"/>
  </fieldset>

    <input type="button" onClick="enviar_formulario();" class="pure-button pure-button-primary" name="submit" value="Actualizar Configuración" id="submitbutton"/>

  </form>
</div>
  <div class="col-derecha">

    <form action="" method="post" id=""
          class="pure-form  pure-form-stacked" >

    <fieldset>
    <legend>   <img src="http://www.mricons.com/store/png/1756_2668_128_advanced_advancedsettings_settings_setup_icon.png" width="32px" height="32px">
      Mantenimiento
    </legend>

      <label for="mantenimiento">Mantenimiento</label>
      <select id="mantemiento">
        <option value=""></option>
        <%@mantenimientos.each do | mantenimiento | %>
        <option title="<%=mantenimiento.descripcion_larga%>" value="<%= mantenimiento.plan %>"><%="#{mantenimiento.plan} - #{mantenimiento.descripcion_corta}"%></option>
        <% end %>
     </select>
    <input type="button" class="pure-button pure-button-primary" value="Ejecutar Mantenimiento" title="Dependiendo del uso del sistema, algunos Mantenimientos pueden demorar.">
      </fieldset>
    </form>

  </div>

  <script type="text/javascript">

    function enviar_formulario(sender) {


        $("#actualizar_configuracion").validate();

        if(!$("#actualizar_configuracion").valid()) return;

        var postData = $("#actualizar_configuracion").find('input, select, textarea, button').serializeArray();

        var formURL = "administracion/do_actualizar_configuracion";

            $.ajax({
                url : formURL,
                type: "POST",
                data : postData,
                //contentType:"application/json; charset=utf-8",
                // dataType:"json",
                success:function(data, textStatus, jqXHR) {
                    if(data.status==="OK") {
                        $("#modal_padre_alta_exitosa").dialog({
                            modal: true,
                            buttons: {
                                Ok: function () {
                                    $(this).dialog("close");
                                }
                            }
                        });
                    }
                    else {
                        mostrar_error_tecnico();
                    }
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    mostrar_error_tecnico();
                }
            });
    }


    $("#actualizar_configuracion").validate({
        invalidHandler: function(event, validator) {
            $("#modal_padre_alta_fallida_revisar_campos_obligatorios").dialog({
                        modal: true,
                        buttons: {
                            Ok: function () {
                                $(this).dialog("close");
                            }
                        }
                    }
            );
        },
        submitHandler: function() {

        },
        rules: {
            "apellidos"     : { required: true, minlength: 2 },
            "nombres"       : { required: true, minlength: 2 },
            "correo"        : { required: true, email: true },
            "tipo"          : { required: true }
        }
    });

    $.validator.messages.required = 'Este campo es de carga obligatoria.';

</script>

<div id="modal_padre_alta_exitosa" title="Mensaje" style="display:none;">
  El nuevo Padré ha sido dado de alta en forma exitosa!
</div>


  <div id="modal_padre_alta_fallida_revisar_campos_obligatorios" title="Mensaje" style="display:none;">
    El nuevo Pádre no puede ser dado de alta porque algunos campos son obligatorios y no fueron completados, revise los campos indicados (*) y luego vuelva a aceptar.
  </div>

</div>
